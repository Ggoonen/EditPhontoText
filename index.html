<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>توقعات كأس العرب 2025</title>
    
    <!-- خط تجوال -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    
    <!-- مكتبة Tailwind CSS للتنسيق -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- مكتبات React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #0f172a;
            overflow: hidden; /* منع السكرول */
            touch-action: manipulation;
        }

        /* أنيميشن الخلفية (سلاش) */
        .slash-bg {
            position: absolute;
            inset: -50%;
            background: 
                linear-gradient(-45deg, transparent 40%, rgba(59, 130, 246, 0.1) 45%, rgba(59, 130, 246, 0.3) 50%, rgba(59, 130, 246, 0.1) 55%, transparent 60%),
                linear-gradient(-45deg, transparent 20%, rgba(37, 99, 235, 0.05) 25%, rgba(37, 99, 235, 0.2) 30%, rgba(37, 99, 235, 0.05) 35%, transparent 40%);
            background-size: 200% 200%;
            animation: slashMove 15s linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        .slash-bg-2 {
             background: linear-gradient(-45deg, transparent 60%, rgba(96, 165, 250, 0.05) 65%, rgba(96, 165, 250, 0.15) 70%, rgba(96, 165, 250, 0.05) 75%, transparent 80%);
             background-size: 200% 200%;
             animation: slashMove 20s linear infinite reverse;
             opacity: 0.7;
        }
        @keyframes slashMove {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 200%; }
        }

        .card-glass {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .ring-selected { box-shadow: 0 0 0 2px #3b82f6, 0 0 15px rgba(59, 130, 246, 0.5); }
        
        /* تأثيرات الظلال للنصوص */
        .drop-shadow-glow { filter: drop-shadow(0 0 8px rgba(234, 179, 8, 0.6)); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- أيقونات SVG ---
        const TrophyIcon = ({size=20, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 1 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
        );
        const CameraIcon = ({size=18}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>
        );
        const RefreshIcon = ({size=20, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );

        // --- البيانات ---
        const TEAMS_DB = {
            qa: { id: 'qa', name: 'قطر' }, tn: { id: 'tn', name: 'تونس' }, sy: { id: 'sy', name: 'سوريا' }, ps: { id: 'ps', name: 'فلسطين' },
            ma: { id: 'ma', name: 'المغرب' }, sa: { id: 'sa', name: 'السعودية' }, om: { id: 'om', name: 'عمان' }, km: { id: 'km', name: 'جزر القمر' },
            eg: { id: 'eg', name: 'مصر' }, jo: { id: 'jo', name: 'الأردن' }, ae: { id: 'ae', name: 'الإمارات' }, kw: { id: 'kw', name: 'الكويت' },
            dz: { id: 'dz', name: 'الجزائر' }, iq: { id: 'iq', name: 'العراق' }, bh: { id: 'bh', name: 'البحرين' }, sd: { id: 'sd', name: 'السودان' }
        };

        const GROUPS_INFO = [
            { id: 'A', title: 'المجموعة A', teams: ['qa', 'tn', 'sy', 'ps'] },
            { id: 'B', title: 'المجموعة B', teams: ['ma', 'sa', 'om', 'km'] },
            { id: 'C', title: 'المجموعة C', teams: ['eg', 'jo', 'ae', 'kw'] },
            { id: 'D', title: 'المجموعة D', teams: ['dz', 'iq', 'bh', 'sd'] }
        ];

        // --- المكونات ---
        const FullRectFlag = ({ teamId, className }) => {
            if (!teamId) return <div className={`bg-white/5 border border-white/10 ${className}`} />;
            return (
                <img 
                    src={`https://flagcdn.com/${teamId}.svg`} 
                    alt={teamId}
                    className={`object-cover border border-white/20 select-none rounded-sm shadow-sm ${className}`}
                    draggable="false"
                />
            );
        };

        const MiniTeam = ({ tId, isSelected, onClick }) => (
            <button onClick={onClick} className={`relative w-10 h-7 rounded-sm overflow-hidden transition-all ${isSelected ? 'ring-selected opacity-100 z-10' : 'opacity-70 hover:opacity-100 hover:ring-1 hover:ring-white/30'}`}>
                <FullRectFlag teamId={tId} className="w-full h-full" />
            </button>
        );

        const StripTeam = ({ tId, isSelected, onClick }) => {
            const team = tId ? TEAMS_DB[tId] : null;
            return (
                <button onClick={onClick} className={`flex items-center gap-3 px-2 py-1.5 rounded-md w-full transition-all ${isSelected ? 'bg-blue-600 text-white shadow-md' : 'hover:bg-white/5 text-white/70 border border-transparent hover:border-white/10'}`}>
                    <FullRectFlag teamId={tId} className="w-8 h-5 rounded-sm" />
                    <span className="text-[11px] font-bold truncate">{team ? team.name : '-'}</span>
                </button>
            );
        };

        const VerticalTeam = ({ tId, onClick }) => {
            const team = tId ? TEAMS_DB[tId] : null;
            return (
                <button onClick={onClick} className="flex-1 flex flex-col items-center gap-2 group">
                    <FullRectFlag teamId={tId} className="w-14 h-9 rounded-sm group-hover:scale-105 transition-transform group-hover:ring-1 group-hover:ring-white/30" />
                    <span className="text-[11px] font-bold">{team ? team.name : '???'}</span>
                </button>
            );
        };

        // --- التطبيق الرئيسي ---
        const App = () => {
            const [picks, setPicks] = useState({ A: {}, B: {}, C: {}, D: {} });
            const [ko, setKo] = useState({});
            const [mode, setMode] = useState('edit');

            const handleGroupSelect = (groupId, teamId) => {
                if (mode === 'capture') return;
                setPicks(prev => {
                    const groupPicks = { ...prev[groupId] };
                    if (groupPicks[1] === teamId) groupPicks[1] = null;
                    else if (groupPicks[2] === teamId) groupPicks[2] = null;
                    else if (!groupPicks[1]) groupPicks[1] = teamId;
                    else if (!groupPicks[2]) groupPicks[2] = teamId;
                    else { groupPicks[1] = teamId; groupPicks[2] = null; }
                    return { ...prev, [groupId]: groupPicks };
                });
                setKo({});
            };

            const handleKnockoutSelect = (matchId, winnerId) => {
                if (mode === 'capture' || !winnerId) return;
                setKo(prev => ({ ...prev, [matchId]: winnerId }));
            };

            const getTeam = (id) => id ? TEAMS_DB[id] : null;

            const matches = {
                qf: [
                    { id: 'qf1', t1: picks.A[1], t2: picks.B[2] },
                    { id: 'qf2', t1: picks.B[1], t2: picks.A[2] },
                    { id: 'qf3', t1: picks.C[1], t2: picks.D[2] },
                    { id: 'qf4', t1: picks.D[1], t2: picks.C[2] }
                ],
                sf: [
                    { id: 'sf1', t1: ko.qf1, t2: ko.qf3 },
                    { id: 'sf2', t1: ko.qf2, t2: ko.qf4 }
                ],
                final: { id: 'final', t1: ko.sf1, t2: ko.sf2 }
            };

            return (
                <div className="min-h-screen h-screen bg-[#0f172a] text-white font-tajawal relative overflow-hidden flex flex-col items-center" dir="rtl">
                    {/* الخلفيات المتحركة */}
                    <div className="slash-bg"></div>
                    <div className="slash-bg slash-bg-2"></div>
                    
                    {/* أزرار التحكم */}
                    {mode === 'edit' && (
                        <div className="absolute top-4 left-4 z-50 flex gap-2">
                            <button 
                                onClick={() => { setPicks({A:{},B:{},C:{},D:{}}); setKo({}); }}
                                className="p-2 bg-slate-800/80 rounded-full hover:bg-slate-700 backdrop-blur transition-colors border border-white/10"
                            >
                                <RefreshIcon className="text-blue-300" />
                            </button>
                            <button 
                                onClick={() => setMode('capture')}
                                className="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold shadow-lg active:scale-95 transition-all"
                            >
                                <CameraIcon /> تصوير
                            </button>
                        </div>
                    )}

                    {mode === 'capture' && (
                        <button 
                            onClick={() => setMode('edit')}
                            className="absolute top-4 left-4 z-50 px-4 py-2 bg-black/50 rounded-full text-xs font-bold backdrop-blur border border-white/10"
                        >
                            خروج
                        </button>
                    )}

                    {/* المحتوى الرئيسي */}
                    <div className="relative z-10 w-full max-w-md h-full flex flex-col p-4 pb-8 space-y-4">
                        
                        {/* الرأس */}
                        <header className="text-center pt-6 shrink-0">
                            <div className="inline-flex items-center gap-2 border-b-2 border-blue-500/50 pb-2 mb-2">
                                <TrophyIcon className="text-blue-400" />
                                <span className="text-sm font-black tracking-[0.2em] uppercase text-blue-200">Arab Cup 2025</span>
                            </div>
                            <h1 className="text-3xl font-black drop-shadow-md bg-clip-text text-transparent bg-gradient-to-b from-white to-blue-200">
                                توقعات الطريق للذهب
                            </h1>
                        </header>

                        {/* المجموعات */}
                        <div className="grid grid-cols-2 gap-2 shrink-0">
                            {GROUPS_INFO.map(group => (
                                <div key={group.id} className="card-glass rounded-xl p-2.5">
                                    <div className="flex justify-between items-center mb-2 px-1">
                                        <span className="text-[11px] font-bold text-blue-300">{group.title}</span>
                                        <div className="flex gap-1">
                                            <div className={`w-1.5 h-1.5 rounded-sm ${picks[group.id][1] ? 'bg-blue-500 shadow-blue-500/50 shadow-sm' : 'bg-white/10'}`}></div>
                                            <div className={`w-1.5 h-1.5 rounded-sm ${picks[group.id][2] ? 'bg-sky-400 shadow-sky-400/50 shadow-sm' : 'bg-white/10'}`}></div>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-4 gap-1.5">
                                        {group.teams.map(teamId => {
                                            const rank = picks[group.id][1] === teamId ? 1 : picks[group.id][2] === teamId ? 2 : null;
                                            return (
                                                <button 
                                                    key={teamId} 
                                                    onClick={() => handleGroupSelect(group.id, teamId)}
                                                    className={`relative aspect-[3/2] rounded-sm overflow-hidden transition-all ${rank ? 'ring-selected z-10 opacity-100' : 'opacity-70 hover:opacity-100 hover:ring-1 hover:ring-white/30'}`}
                                                >
                                                    <FullRectFlag teamId={teamId} className="w-full h-full" />
                                                    {rank && <div className={`absolute inset-0 flex items-center justify-center bg-black/50 text-white font-black text-xs`}>{rank}</div>}
                                                </button>
                                            )
                                        })}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* المسار */}
                        <div className="flex-1 flex flex-col justify-between py-2 relative space-y-4">
                            
                            {/* ربع النهائي */}
                            <div className="grid grid-cols-2 gap-x-6 gap-y-3">
                                {matches.qf.map((m, idx) => (
                                    <div key={m.id} className={`flex items-center gap-2 card-glass rounded-lg p-1.5 ${idx % 2 !== 0 ? 'flex-row-reverse' : ''}`}>
                                        <MiniTeam tId={m.t1} isSelected={ko[m.id] === m.t1} onClick={() => handleKnockoutSelect(m.id, m.t1)} />
                                        <span className="text-[10px] font-bold text-blue-300/50">VS</span>
                                        <MiniTeam tId={m.t2} isSelected={ko[m.id] === m.t2} onClick={() => handleKnockoutSelect(m.id, m.t2)} />
                                    </div>
                                ))}
                            </div>

                            {/* خطوط بصرية */}
                            <div className="h-8 relative opacity-50">
                                <div className="absolute top-0 left-[25%] w-px h-full bg-gradient-to-b from-blue-500/50 to-blue-500/20"></div>
                                <div className="absolute top-0 right-[25%] w-px h-full bg-gradient-to-b from-blue-500/50 to-blue-500/20"></div>
                            </div>

                            {/* نصف النهائي */}
                            <div className="flex justify-center gap-6">
                                {matches.sf.map(m => (
                                    <div key={m.id} className="w-36 flex flex-col gap-1.5 card-glass rounded-lg p-2">
                                        <StripTeam tId={m.t1} isSelected={ko[m.id] === m.t1} onClick={() => handleKnockoutSelect(m.id, m.t1)} />
                                        <StripTeam tId={m.t2} isSelected={ko[m.id] === m.t2} onClick={() => handleKnockoutSelect(m.id, m.t2)} />
                                    </div>
                                ))}
                            </div>

                            {/* خطوط بصرية */}
                            <div className="h-8 relative opacity-50">
                                <div className="absolute bottom-0 left-1/2 -translate-x-1/2 w-px h-full bg-gradient-to-t from-blue-500/50 to-blue-500/20"></div>
                                <div className="absolute bottom-0 left-[35%] right-[35%] h-full border-t border-l border-r border-blue-500/30 rounded-t-xl"></div>
                            </div>

                            {/* النهائي */}
                            <div className="flex-1 flex flex-col items-center justify-center min-h-[150px]">
                                {!ko.final ? (
                                    <div className="bg-gradient-to-b from-slate-800/80 to-slate-900/80 p-4 rounded-2xl border border-blue-400/30 text-center w-52 shadow-lg shadow-blue-900/20">
                                        <div className="text-blue-300 text-xs font-bold uppercase tracking-widest mb-3">Final Match</div>
                                        <div className="flex justify-between items-center">
                                            <VerticalTeam tId={matches.final.t1} onClick={() => handleKnockoutSelect('final', matches.final.t1)} />
                                            <div className="w-px h-10 bg-white/10 mx-3"></div>
                                            <VerticalTeam tId={matches.final.t2} onClick={() => handleKnockoutSelect('final', matches.final.t2)} />
                                        </div>
                                    </div>
                                ) : (
                                    <div className="relative w-full max-w-[280px] aspect-[16/10] bg-gradient-to-b from-blue-900 to-slate-950 rounded-2xl overflow-hidden shadow-2xl border-2 border-blue-400/50 animate-in zoom-in duration-500">
                                        <div className="absolute top-0 right-0 w-40 h-40 bg-blue-500/20 rounded-full blur-3xl"></div>
                                        <div className="absolute inset-0 flex flex-col items-center justify-center p-5 text-center z-10">
                                            <TrophyIcon size={36} className="text-blue-300 mb-3 drop-shadow-glow" />
                                            <div className="text-blue-200 text-[10px] font-black uppercase tracking-[0.2em] mb-3">The Champion</div>
                                            <FullRectFlag teamId={ko.final} className="w-28 h-20 rounded-md shadow-lg z-10 relative border-blue-300/30" />
                                            <h2 className="text-3xl font-black text-white mt-4 drop-shadow-md">{getTeam(ko.final)?.name}</h2>
                                        </div>
                                    </div>
                                )}
                            </div>

                        </div>

                        <div className="text-center mt-auto py-2 opacity-40 text-[8px] font-mono tracking-widest">
                            ARAB CUP 2025 • DARK BLUE EDITION
                        </div>

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

